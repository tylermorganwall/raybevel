<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Generates Polygon Straight Skeletons and 3D Bevels • raybevel</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Generates Polygon Straight Skeletons and 3D Bevels">
<meta name="description" content="Generates polygon straight skeletons and 3D models. Provides functions to create and visualize interior polygon offsets, 3D beveled polygons, and 3D roof models.">
<meta property="og:description" content="Generates polygon straight skeletons and 3D models. Provides functions to create and visualize interior polygon offsets, 3D beveled polygons, and 3D roof models.">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@tylermorganwall">
<meta name="twitter:site" content="@tylermorganwall">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">raybevel</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials-blog-posts" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials/Blog Posts</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials-blog-posts">
<li><a class="external-link dropdown-item" href="https://www.tylermw.com/posts/rayverse/raybevel-introduction.html">Roofs, Bevels, and Skeletons: Introducing the Raybevel Package</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="reference/index.html"><span class="fa fa-file-code-o"></span> functions</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tylermorganwall/raybevel"><span class="fa fa-github fa-lg"></span> GitHub</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="raybevel-3d-bevels-and-straight-skeletons-in-r">raybevel: 3D Bevels and Straight Skeletons in R<a class="anchor" aria-label="anchor" href="#raybevel-3d-bevels-and-straight-skeletons-in-r"></a>
</h1></div>
<p><img src="reference/figures/raybevelhex_big.png" align="right" width="400px"></p>
<!-- badges: start -->

<p><code>raybevel</code> is an R package that can create and visualize straight skeletons, generate offset polygons, and generate 3D roof models and 3D beveled polygons. The 3D beveled polygons can be given any arbitrary 1D bevel profile controlled by the user.</p>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>Straight skeletons are geometric objects obtained by shrinking polygon boundaries at a uniform speed. These skeletons have a variety of applications, such as:</p>
<ul>
<li>Offsetting polygons: Creating inner margins for a given polygon.</li>
<li>Roof designs: Generating planar straight-line drawings that represent the roof of a structure.</li>
<li>Beveling: Designing roof structures with sloping sides.</li>
</ul>
<p><code>raybevel</code> generates straight skeletons from polygons and uses these structures to generate 3D meshes and offset polygons.</p>
</div>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<ul>
<li><p><strong>Skeleton Generation</strong>: Create straight skeletons from polygons, with or without holes. Supports raw polygons and {sf} objects.</p></li>
<li><p><strong>Polygon Offsetting</strong>: Generate inset polygons.</p></li>
<li><p><strong>3D Roof Generation and 3D Beveling</strong>: Create and visualize simple and complex beveled roofs based on straight skeletons.</p></li>
<li><p><strong>Visualization</strong>: Plot straight skeletons and offset polygons.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>raybevel</code> can be installed from Github:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"tylermorganwall/raybevel"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jakubnowosad.com/spData/" class="external-link">spData</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>First, let’s load the library and generate a polygon with holes.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.raybevel.com" class="external-link">raybevel</a></span><span class="op">)</span></span>
<span><span class="co"># Define a simple polygon</span></span>
<span><span class="va">vertices</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">7</span>, <span class="fl">0</span>, <span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">0</span>, <span class="fl">7</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-</span> <span class="fl">3.5</span></span>
<span><span class="co"># Holes inside the polygon</span></span>
<span><span class="va">hole_1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">1</span>, <span class="op">]</span> <span class="op">-</span> <span class="fl">3.5</span></span>
<span><span class="va">hole_2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">6</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">1</span>, <span class="op">]</span> <span class="op">-</span> <span class="fl">3.5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/frame.html" class="external-link">plot.new</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mai <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">vertices</span>, type <span class="op">=</span> <span class="st">"n"</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, xlab <span class="op">=</span> <span class="st">""</span>, ylab <span class="op">=</span> <span class="st">""</span>,</span>
<span>     xaxt <span class="op">=</span> <span class="st">'n'</span>, yaxt <span class="op">=</span> <span class="st">'n'</span>, frame.plot <span class="op">=</span> <span class="cn">FALSE</span>, asp <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span><span class="va">vertices</span>, col <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span><span class="va">hole_1</span>, col <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span><span class="va">hole_2</span>, col <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-simple_poly-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html" class="external-link">dev.off</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; null device </span></span>
<span><span class="co">#&gt;           1</span></span></code></pre></div>
<p>Generate the straight skeleton. This plots arrows indicating the directionality of the links, which either point up-roof or along constant distance contours.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">skeleton</span> <span class="op">=</span> <span class="fu"><a href="reference/skeletonize.html">skeletonize</a></span><span class="op">(</span><span class="va">vertices</span>, holes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">hole_1</span>, <span class="va">hole_2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_skeleton.html">plot_skeleton</a></span><span class="op">(</span><span class="va">skeleton</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot_skeleton-1.png" style="display: block; margin: auto;"></p>
<p>Now, we can offset this polygon inwards:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">offset_polygon</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_offset_polygon.html">generate_offset_polygon</a></span><span class="op">(</span><span class="va">skeleton</span>, offset <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span></span>
<span><span class="va">offset_polygon</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; $offset_1.200000_1</span></span>
<span><span class="co">#&gt;      x    y</span></span>
<span><span class="co">#&gt; 1  2.3 -2.3</span></span>
<span><span class="co">#&gt; 2  2.3  0.3</span></span>
<span><span class="co">#&gt; 3  0.3  0.3</span></span>
<span><span class="co">#&gt; 4  0.3  2.3</span></span>
<span><span class="co">#&gt; 5 -2.3  2.3</span></span>
<span><span class="co">#&gt; 6 -2.3 -0.3</span></span>
<span><span class="co">#&gt; 7 -0.3 -0.3</span></span>
<span><span class="co">#&gt; 8 -0.3 -2.3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "rayskeleton_offset_polygons" "list"                       </span></span>
<span><span class="co">#&gt; attr(,"number_polygons")</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "rayskeleton_offset_polygons_collection"</span></span>
<span><span class="co">#&gt; [2] "list"                                  </span></span>
<span><span class="co">#&gt; attr(,"skeleton")</span></span>
<span><span class="co">#&gt; $nodes</span></span>
<span><span class="co">#&gt;    id    x    y time  edge</span></span>
<span><span class="co">#&gt; 1   1 -3.5 -3.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 2   2  3.5 -3.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 3   3  3.5  3.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 4   4 -3.5  3.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 5   5 -2.5 -2.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 6   6 -2.5 -1.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 7   7 -1.5 -1.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 8   8 -1.5 -2.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 9   9  1.5  1.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 10 10  1.5  2.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 11 11  2.5  2.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 12 12  2.5  1.5  0.0  TRUE</span></span>
<span><span class="co">#&gt; 13 13 -3.0 -3.0  0.5 FALSE</span></span>
<span><span class="co">#&gt; 14 14 -3.0 -1.0  0.5 FALSE</span></span>
<span><span class="co">#&gt; 15 15  3.0  1.0  0.5 FALSE</span></span>
<span><span class="co">#&gt; 16 16 -1.0 -3.0  0.5 FALSE</span></span>
<span><span class="co">#&gt; 17 17  3.0  3.0  0.5 FALSE</span></span>
<span><span class="co">#&gt; 18 18  1.0  3.0  0.5 FALSE</span></span>
<span><span class="co">#&gt; 19 19  0.0  0.0  1.5 FALSE</span></span>
<span><span class="co">#&gt; 20 20 -1.0  1.0  2.5 FALSE</span></span>
<span><span class="co">#&gt; 21 21  1.0 -1.0  2.5 FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $links</span></span>
<span><span class="co">#&gt;    source destination  edge source_time destination_time</span></span>
<span><span class="co">#&gt; 1      12          11  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 2      11          10  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 3      10           9  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 4       9          12  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 5       8           7  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 6       7           6  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 7       6           5  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 8       5           8  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 9       4           3  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 10      3           2  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 11      2           1  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 12      1           4  TRUE         0.0              0.0</span></span>
<span><span class="co">#&gt; 13      1          13 FALSE         0.0              0.5</span></span>
<span><span class="co">#&gt; 14      3          17 FALSE         0.0              0.5</span></span>
<span><span class="co">#&gt; 15      5          13 FALSE         0.0              0.5</span></span>
<span><span class="co">#&gt; 16      6          14 FALSE         0.0              0.5</span></span>
<span><span class="co">#&gt; 17      8          16 FALSE         0.0              0.5</span></span>
<span><span class="co">#&gt; 18     10          18 FALSE         0.0              0.5</span></span>
<span><span class="co">#&gt; 19     11          17 FALSE         0.0              0.5</span></span>
<span><span class="co">#&gt; 20     12          15 FALSE         0.0              0.5</span></span>
<span><span class="co">#&gt; 21      7          19 FALSE         0.0              1.5</span></span>
<span><span class="co">#&gt; 22      9          19 FALSE         0.0              1.5</span></span>
<span><span class="co">#&gt; 23      2          21 FALSE         0.0              2.5</span></span>
<span><span class="co">#&gt; 24      4          20 FALSE         0.0              2.5</span></span>
<span><span class="co">#&gt; 25     13          16 FALSE         0.5              0.5</span></span>
<span><span class="co">#&gt; 26     13          14 FALSE         0.5              0.5</span></span>
<span><span class="co">#&gt; 27     15          17 FALSE         0.5              0.5</span></span>
<span><span class="co">#&gt; 28     17          18 FALSE         0.5              0.5</span></span>
<span><span class="co">#&gt; 29     14          20 FALSE         0.5              2.5</span></span>
<span><span class="co">#&gt; 30     15          21 FALSE         0.5              2.5</span></span>
<span><span class="co">#&gt; 31     16          21 FALSE         0.5              2.5</span></span>
<span><span class="co">#&gt; 32     18          20 FALSE         0.5              2.5</span></span>
<span><span class="co">#&gt; 33     19          20 FALSE         1.5              2.5</span></span>
<span><span class="co">#&gt; 34     19          21 FALSE         1.5              2.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "rayskeleton"</span></span>
<span><span class="co">#&gt; attr(,"original_vertices")</span></span>
<span><span class="co">#&gt;         x    y</span></span>
<span><span class="co">#&gt; [1,] -3.5 -3.5</span></span>
<span><span class="co">#&gt; [2,]  3.5 -3.5</span></span>
<span><span class="co">#&gt; [3,]  3.5  3.5</span></span>
<span><span class="co">#&gt; [4,] -3.5  3.5</span></span>
<span><span class="co">#&gt; attr(,"original_holes")</span></span>
<span><span class="co">#&gt; attr(,"original_holes")[[1]]</span></span>
<span><span class="co">#&gt;         x    y</span></span>
<span><span class="co">#&gt; [1,] -2.5 -2.5</span></span>
<span><span class="co">#&gt; [2,] -2.5 -1.5</span></span>
<span><span class="co">#&gt; [3,] -1.5 -1.5</span></span>
<span><span class="co">#&gt; [4,] -1.5 -2.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"original_holes")[[2]]</span></span>
<span><span class="co">#&gt;        x   y</span></span>
<span><span class="co">#&gt; [1,] 1.5 1.5</span></span>
<span><span class="co">#&gt; [2,] 1.5 2.5</span></span>
<span><span class="co">#&gt; [3,] 2.5 2.5</span></span>
<span><span class="co">#&gt; [4,] 2.5 1.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"number_offsets")</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; attr(,"original_vertices")</span></span>
<span><span class="co">#&gt;         x    y</span></span>
<span><span class="co">#&gt; [1,] -3.5 -3.5</span></span>
<span><span class="co">#&gt; [2,]  3.5 -3.5</span></span>
<span><span class="co">#&gt; [3,]  3.5  3.5</span></span>
<span><span class="co">#&gt; [4,] -3.5  3.5</span></span>
<span><span class="co">#&gt; attr(,"original_holes")</span></span>
<span><span class="co">#&gt; attr(,"original_holes")[[1]]</span></span>
<span><span class="co">#&gt;         x    y</span></span>
<span><span class="co">#&gt; [1,] -2.5 -2.5</span></span>
<span><span class="co">#&gt; [2,] -2.5 -1.5</span></span>
<span><span class="co">#&gt; [3,] -1.5 -1.5</span></span>
<span><span class="co">#&gt; [4,] -1.5 -2.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"original_holes")[[2]]</span></span>
<span><span class="co">#&gt;        x   y</span></span>
<span><span class="co">#&gt; [1,] 1.5 1.5</span></span>
<span><span class="co">#&gt; [2,] 1.5 2.5</span></span>
<span><span class="co">#&gt; [3,] 2.5 2.5</span></span>
<span><span class="co">#&gt; [4,] 2.5 1.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "rayskeleton_polygons" "list"</span></span>
<span><span class="fu"><a href="reference/plot_offset_polygon.html">plot_offset_polygon</a></span><span class="op">(</span><span class="va">offset_polygon</span>, skeleton <span class="op">=</span> <span class="va">skeleton</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-offsets-1.png" style="display: block; margin: auto;"></p>
<p>We can also plot multiple offsets and use color palettes.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span></span>
<span><span class="va">offset_polygon</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_offset_polygon.html">generate_offset_polygon</a></span><span class="op">(</span><span class="va">skeleton</span>, offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2.5</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">+</span><span class="fl">0.05</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_skeleton.html">plot_skeleton</a></span><span class="op">(</span><span class="va">skeleton</span>, arrow_color <span class="op">=</span> <span class="st">"black"</span>, polygon_color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span> </span>
<span><span class="fu"><a href="reference/plot_offset_polygon.html">plot_offset_polygon</a></span><span class="op">(</span><span class="va">offset_polygon</span>, skeleton <span class="op">=</span> <span class="va">skeleton</span>, plot_original_polygon <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-multioffsets-1.png" style="display: block; margin: auto;"></p>
<p>Let’s design a simple roof and render it with rayrender. When base_height is less than the vertical offset (default of 0), the sides of the polygon will also be extruded.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rayrender.net" class="external-link">rayrender</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rayvertex.com" class="external-link">rayvertex</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">roof</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_roof.html">generate_roof</a></span><span class="op">(</span><span class="va">skeleton</span><span class="op">)</span>  </span>
<span></span>
<span><span class="fu"><a href="http://www.rayrender.net/reference/generate_ground.html" class="external-link">generate_ground</a></span><span class="op">(</span>depth <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey"</span>, checkercolor <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"dodgerblue"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">20</span>, x <span class="op">=</span> <span class="fl">0</span>, z <span class="op">=</span> <span class="op">-</span><span class="fl">10</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>intensity <span class="op">=</span> <span class="fl">200</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">0</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>, fov <span class="op">=</span> <span class="fl">25</span>, </span>
<span>               min_variance <span class="op">=</span> <span class="fl">1e-6</span>, clamp_value <span class="op">=</span> <span class="fl">10</span>, samples <span class="op">=</span> <span class="fl">256</span>, width <span class="op">=</span> <span class="fl">800</span>, height <span class="op">=</span> <span class="fl">800</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-roof-1.png" style="display: block; margin: auto;"></p>
<p>And here is a beveled roof (here, setting the base height to the level of the ground, which generates the sides of the polygon as well):</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">roof_bevel</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_beveled_polygon.html">generate_beveled_polygon</a></span><span class="op">(</span><span class="va">skeleton</span>, base <span class="op">=</span> <span class="cn">TRUE</span>, base_height <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>,</span>
<span>                                      bevel_offsets <span class="op">=</span> <span class="fu"><a href="reference/generate_bevel.html">generate_bevel</a></span><span class="op">(</span><span class="st">"circular"</span>, max_height <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>                                                                      bevel_end <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,<span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="http://www.rayrender.net/reference/generate_ground.html" class="external-link">generate_ground</a></span><span class="op">(</span>depth <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey"</span>, checkercolor <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_bevel</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"dodgerblue"</span><span class="op">)</span>, override_material <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">15</span>, x <span class="op">=</span> <span class="fl">0</span>, z <span class="op">=</span> <span class="op">-</span><span class="fl">10</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>intensity <span class="op">=</span> <span class="fl">200</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">0</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>, fov <span class="op">=</span> <span class="fl">25</span>, </span>
<span>               min_variance <span class="op">=</span> <span class="fl">1e-6</span>, clamp_value <span class="op">=</span> <span class="fl">10</span>, samples <span class="op">=</span> <span class="fl">256</span>, width <span class="op">=</span> <span class="fl">800</span>, height <span class="op">=</span> <span class="fl">800</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-bevelroof-1.png" style="display: block; margin: auto;"></p>
<p>Multiple bevels are also supported (here, we use raw distance offsets, rather than percentage):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">roof_bevel_multi</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_beveled_polygon.html">generate_beveled_polygon</a></span><span class="op">(</span><span class="va">skeleton</span>, </span>
<span>                                            bevel_offsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                                            bevel_heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span><span class="op">)</span>,</span>
<span>                                            raw_offsets <span class="op">=</span> <span class="cn">TRUE</span>, base <span class="op">=</span> <span class="cn">TRUE</span>, base_height <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="http://www.rayrender.net/reference/generate_ground.html" class="external-link">generate_ground</a></span><span class="op">(</span>depth <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey"</span>, checkercolor <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_bevel_multi</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"dodgerblue"</span><span class="op">)</span>, override_material <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">15</span>, x <span class="op">=</span> <span class="fl">0</span>, z <span class="op">=</span> <span class="op">-</span><span class="fl">10</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>intensity <span class="op">=</span> <span class="fl">200</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">0</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>, fov <span class="op">=</span> <span class="fl">25</span>, </span>
<span>               min_variance <span class="op">=</span> <span class="fl">1e-6</span>, clamp_value <span class="op">=</span> <span class="fl">10</span>, samples <span class="op">=</span> <span class="fl">256</span>, width <span class="op">=</span> <span class="fl">800</span>, height <span class="op">=</span> <span class="fl">800</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-multibevelroof-1.png" style="display: block; margin: auto;"></p>
<p>You can use this to generate smooth variations in roof height:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">roof_bevel_multi</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_beveled_polygon.html">generate_beveled_polygon</a></span><span class="op">(</span><span class="va">skeleton</span>, base_height <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>,</span>
<span>                                            bevel_offsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2.5</span>, by <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span>,</span>
<span>                                            bevel_heights <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2.5</span>, by <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>                                            raw_heights <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                            raw_offsets <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="http://www.rayrender.net/reference/generate_ground.html" class="external-link">generate_ground</a></span><span class="op">(</span>depth <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey"</span>, checkercolor <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_bevel_multi</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"dodgerblue"</span><span class="op">)</span>, override_material <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">15</span>, x <span class="op">=</span> <span class="fl">0</span>, z <span class="op">=</span> <span class="op">-</span><span class="fl">10</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>intensity <span class="op">=</span> <span class="fl">200</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">0</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>, fov <span class="op">=</span> <span class="fl">25</span>,</span>
<span>               min_variance <span class="op">=</span> <span class="fl">1e-6</span>, clamp_value <span class="op">=</span> <span class="fl">10</span>, samples <span class="op">=</span> <span class="fl">256</span>, width <span class="op">=</span> <span class="fl">800</span>, height <span class="op">=</span> <span class="fl">800</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-smoothbevelroof-1.png" style="display: block; margin: auto;"></p>
<p>And you can specify more complex functions for bevel height as well:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">roof_bevel_multi_sin</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_beveled_polygon.html">generate_beveled_polygon</a></span><span class="op">(</span><span class="va">skeleton</span>, </span>
<span>                                                bevel_offsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2.5</span>,by<span class="op">=</span><span class="fl">0.02</span><span class="op">)</span>,</span>
<span>                                                bevel_heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sinpi</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2.5</span>,by<span class="op">=</span><span class="fl">0.02</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>                                                base <span class="op">=</span> <span class="cn">TRUE</span>, vertical_offset<span class="op">=</span><span class="fl">0.5</span>, base_height <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>,</span>
<span>                                                raw_offsets <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="http://www.rayrender.net/reference/generate_ground.html" class="external-link">generate_ground</a></span><span class="op">(</span>depth <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>,material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"grey"</span>, checkercolor <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_bevel_multi_sin</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"dodgerblue"</span><span class="op">)</span>, override_material <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>y<span class="op">=</span><span class="fl">15</span>,x<span class="op">=</span><span class="fl">0</span>,z<span class="op">=</span><span class="op">-</span><span class="fl">10</span>,material<span class="op">=</span><span class="fu"><a href="http://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>intensity <span class="op">=</span> <span class="fl">200</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">0</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>,fov<span class="op">=</span><span class="fl">25</span>, ortho_dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>,<span class="fl">8</span><span class="op">)</span>,</span>
<span>               min_variance <span class="op">=</span> <span class="fl">1e-6</span>, clamp_value <span class="op">=</span> <span class="fl">10</span>, samples <span class="op">=</span> <span class="fl">256</span>, width<span class="op">=</span><span class="fl">800</span>,height<span class="op">=</span><span class="fl">800</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-functionbevelroof-1.png" style="display: block; margin: auto;"></p>
<p>You can also plot {sf} objects. Here, we generate a roof in the shape of California.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rayvertex.com" class="external-link">rayvertex</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Load US states data and extract California</span></span>
<span><span class="va">us_states</span> <span class="op">=</span> <span class="fu">spData</span><span class="fu">::</span><span class="va"><a href="https://jakubnowosad.com/spData/reference/us_states.html" class="external-link">us_states</a></span></span>
<span><span class="va">california</span> <span class="op">=</span> <span class="va">us_states</span><span class="op">[</span><span class="va">us_states</span><span class="op">$</span><span class="va">NAME</span> <span class="op">==</span> <span class="st">"California"</span>,<span class="op">]</span></span>
<span><span class="va">cali_skeleton</span> <span class="op">=</span> <span class="fu"><a href="reference/skeletonize.html">skeletonize</a></span><span class="op">(</span><span class="va">california</span><span class="op">)</span>  <span class="co"># Skeletonize the California shape</span></span>
<span></span>
<span><span class="co"># Generate and transform the roof model</span></span>
<span><span class="va">roof_cali</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_roof.html">generate_roof</a></span><span class="op">(</span><span class="va">cali_skeleton</span>, base <span class="op">=</span> <span class="cn">TRUE</span>, sides <span class="op">=</span> <span class="cn">TRUE</span>, vertical_offset <span class="op">=</span> <span class="fl">1</span>, base_height <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                          angle <span class="op">=</span> <span class="fl">30</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://www.rayvertex.com/reference/center_mesh.html" class="external-link">center_mesh</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://www.rayvertex.com/reference/translate_mesh.html" class="external-link">translate_mesh</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Render the scene with the California roof model</span></span>
<span><span class="fu"><a href="http://www.rayrender.net/reference/generate_ground.html" class="external-link">generate_ground</a></span><span class="op">(</span>depth <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"grey50"</span>, checkercolor <span class="op">=</span> <span class="st">"white"</span>, checkerperiod <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_cali</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"purple"</span><span class="op">)</span>, override_material <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>y<span class="op">=</span><span class="fl">20</span>, x<span class="op">=</span><span class="fl">20</span>, z<span class="op">=</span><span class="op">-</span><span class="fl">50</span>, radius<span class="op">=</span><span class="fl">10</span>, material<span class="op">=</span><span class="fu"><a href="http://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"white"</span>, intensity <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>y<span class="op">=</span><span class="fl">20</span>, x<span class="op">=</span><span class="fl">30</span>, z<span class="op">=</span><span class="fl">50</span>, radius<span class="op">=</span><span class="fl">10</span>, material<span class="op">=</span><span class="fu"><a href="http://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"orange"</span>, intensity <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span>,<span class="op">-</span><span class="fl">5</span><span class="op">)</span>, camera_up<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, lookat<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0.25</span><span class="op">)</span>,</span>
<span>               sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>, fov<span class="op">=</span><span class="fl">0</span>, ortho_dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>,<span class="fl">12</span><span class="op">)</span>,</span>
<span>               min_variance <span class="op">=</span> <span class="fl">0</span>, clamp_value <span class="op">=</span> <span class="fl">10</span>, samples <span class="op">=</span> <span class="fl">256</span>, width<span class="op">=</span><span class="fl">800</span>, height<span class="op">=</span><span class="fl">800</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-ca_sf-1.png" style="display: block; margin: auto;"></p>
<p>We can also generate a complex beveled polygon with <code><a href="reference/generate_beveled_polygon.html">generate_beveled_polygon()</a></code>. We’ll first generate and plot our more complex bevel:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bevel</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_complex_bevel.html">generate_complex_bevel</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bump"</span>, <span class="st">"exp"</span><span class="op">)</span>,</span>
<span>                               bevel_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.3</span><span class="op">)</span>,</span>
<span>                               bevel_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>,<span class="fl">0.6</span><span class="op">)</span>,</span>
<span>                               reverse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">F</span>,<span class="cn">F</span><span class="op">)</span>,</span>
<span>                               segment_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>,<span class="fl">0.2</span><span class="op">)</span>,</span>
<span>                               plot_bevel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<p><img src="reference/figures/README-complex_bevel-1.png" style="display: block; margin: auto;"></p>
<p>Now let’s create a vertically-oriented (by turning <code>swap_yz = FALSE</code> 3D polygon of California and render it as a glossy, double-sided model.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ca_model</span> <span class="op">=</span> <span class="fu"><a href="reference/generate_beveled_polygon.html">generate_beveled_polygon</a></span><span class="op">(</span><span class="va">cali_skeleton</span>, vertical_offset <span class="op">=</span> <span class="fl">0.2</span>, sides <span class="op">=</span> <span class="cn">TRUE</span>, double_sided <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                    bevel_offsets <span class="op">=</span> <span class="va">bevel</span>, swap_yz <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                                    material <span class="op">=</span> <span class="fu">rayvertex</span><span class="fu">::</span><span class="fu"><a href="https://www.rayvertex.com/reference/material_list.html" class="external-link">material_list</a></span><span class="op">(</span>diffuse <span class="op">=</span> <span class="st">"purple"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Rendering the 3D model</span></span>
<span><span class="va">ca_model</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rayvertex</span><span class="fu">::</span><span class="fu"><a href="https://www.rayvertex.com/reference/center_mesh.html" class="external-link">center_mesh</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">1.5</span>, material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/glossy.html" class="external-link">glossy</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"purple"</span>, gloss <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/generate_studio.html" class="external-link">generate_studio</a></span><span class="op">(</span>depth <span class="op">=</span> <span class="op">-</span><span class="fl">4</span>, distance <span class="op">=</span> <span class="op">-</span><span class="fl">15</span>,</span>
<span>                             material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey50"</span>, checkercolor <span class="op">=</span> <span class="st">"grey20"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="http://www.rayrender.net/reference/xy_rect.html" class="external-link">xy_rect</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">15</span>, x <span class="op">=</span> <span class="fl">5</span>, z <span class="op">=</span> <span class="fl">60</span>, xwidth <span class="op">=</span> <span class="fl">100</span>, ywidth <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                     flipped <span class="op">=</span> <span class="cn">TRUE</span>, angle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">45</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>                     material <span class="op">=</span> <span class="fu"><a href="http://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>intensity <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="http://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">50</span><span class="op">)</span>, lookat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1.5</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>               sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>, samples <span class="op">=</span> <span class="fl">256</span>, clamp_value <span class="op">=</span> <span class="fl">10</span>,</span>
<span>               width <span class="op">=</span> <span class="fl">800</span>, height <span class="op">=</span> <span class="fl">800</span>, fov <span class="op">=</span> <span class="fl">15</span>, ortho_dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-ca_sf_bevel-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="to-do">To-do<a class="anchor" aria-label="anchor" href="#to-do"></a>
</h2>
<ul class="task-list">
<li><label><input type="checkbox">Keep CRS information and add option to convert back to {sf} object</label></li>
<li><label><input type="checkbox">ggplot2 geom</label></li>
<li><label><input type="checkbox">external offsets</label></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=raybevel" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/tylermorganwall/raybevel/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/tylermorganwall/raybevel/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing raybevel</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.tylermw.com" class="external-link">Tyler Morgan-Wall</a> <br><small class="roles"> Author, copyright holder, maintainer </small> <a href="https://orcid.org/0000-0002-3131-3814" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/tylermorganwall/raybevel/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/tylermorganwall/raybevel/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.tylermw.com" class="external-link">Tyler Morgan-Wall</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
