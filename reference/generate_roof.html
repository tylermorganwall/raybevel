<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate a 3D roof model — generate_roof • raybevel</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a 3D roof model — generate_roof"><meta property="og:description" content="This function generates a 3D roof model from a straight skeleton."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@tylermorganwall"><meta name="twitter:site" content="@tylermorganwall"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">raybevel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials/Blog Posts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://www.tylermw.com/posts/rayverse/raybevel-introduction.html" class="external-link">Roofs, Bevels, and Skeletons: Introducing the Raybevel Package</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/tylermorganwall/raybevel" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a 3D roof model</h1>
    
    <div class="hidden name"><code>generate_roof.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function generates a 3D roof model from a straight skeleton.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_roof</span><span class="op">(</span></span>
<span>  <span class="va">skeleton</span>,</span>
<span>  max_height <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  vertical_offset <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  base <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  base_height <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  angle <span class="op">=</span> <span class="fl">45</span>,</span>
<span>  sides <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  double_sided <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  scale_all_max <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  swap_yz <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  material <span class="op">=</span> <span class="fu"><a href="https://www.rayvertex.com/reference/material_list.html" class="external-link">material_list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  roof_material <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>skeleton</dt>
<dd><p>Default `NULL`. A straight skeleton generated from the `skeletonize` function.</p></dd>


<dt>max_height</dt>
<dd><p>Default `NA`. The maximum height of the roof.</p></dd>


<dt>vertical_offset</dt>
<dd><p>Default `0`. The vertical offset of the roof.</p></dd>


<dt>base</dt>
<dd><p>Default `TRUE`. A logical flag that controls whether to generate the bottom of the roof.</p></dd>


<dt>base_height</dt>
<dd><p>Default `vertical_offset`. Height of the base.</p></dd>


<dt>angle</dt>
<dd><p>Default `45`. Angle of the roof.</p></dd>


<dt>sides</dt>
<dd><p>Default `FALSE`. A logical flag on whether to draw the sides. This will automatically be set to `TRUE`
if `base = TRUE` and the `base_height` is less than `vertical_offset`.</p></dd>


<dt>double_sided</dt>
<dd><p>Default `FALSE`. A logical flag that controls whether the polygon should be double-sided.</p></dd>


<dt>scale_all_max</dt>
<dd><p>Default `FALSE`. If passing in a list of multiple skeletons with polygons, whether to scale each polygon to the overall
max height, or whether to scale each max height to the maximum internal distance in the polygon.</p></dd>


<dt>swap_yz</dt>
<dd><p>Default `TRUE`. A logical flag that controls whether to swap the y and z coordinates in the resulting mesh.
If `TRUE`, the y and z coordinates will be swapped.</p></dd>


<dt>progress</dt>
<dd><p>Default `TRUE`. A logical flag to control whether a progress bar is displayed during roof generation.</p></dd>


<dt>material</dt>
<dd><p>Default `material_list()`. Interface to set the color/appearance/material options for the resulting `ray_mesh` mesh.</p></dd>


<dt>roof_material</dt>
<dd><p>Default `NA`, uses the material specified in `material`. Interface to set the color/appearance/material options for the resulting `ray_mesh` rooftop mesh.</p></dd>


<dt>verbose</dt>
<dd><p>Default `FALSE`. A logical flag to control whether additional timing information should be displayed.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A 3D mesh of the roof model.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#Generate vertices and holes</span></span></span>
<span class="r-in"><span><span class="va">vertices</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>, <span class="fl">7</span>,<span class="fl">0</span>, <span class="fl">7</span>,<span class="fl">7</span>, <span class="fl">0</span>,<span class="fl">7</span>, <span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">-</span><span class="fl">3.5</span></span></span>
<span class="r-in"><span><span class="va">hole_1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>, <span class="fl">2</span>,<span class="fl">1</span>, <span class="fl">2</span>,<span class="fl">2</span>, <span class="fl">1</span>,<span class="fl">2</span>, <span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">1</span>,<span class="op">]</span><span class="op">-</span><span class="fl">3.5</span></span></span>
<span class="r-in"><span><span class="va">hole_2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">5</span>, <span class="fl">6</span>,<span class="fl">5</span>, <span class="fl">6</span>,<span class="fl">6</span>, <span class="fl">5</span>,<span class="fl">6</span>, <span class="fl">5</span>,<span class="fl">5</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">1</span>,<span class="op">]</span><span class="op">-</span><span class="fl">3.5</span></span></span>
<span class="r-in"><span><span class="va">skeleton</span> <span class="op">=</span> <span class="fu"><a href="skeletonize.html">skeletonize</a></span><span class="op">(</span><span class="va">vertices</span>, holes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">hole_1</span>, <span class="va">hole_2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot_skeleton.html">plot_skeleton</a></span><span class="op">(</span><span class="va">skeleton</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="generate_roof-1.png" alt="" width="800" height="800"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Generate a roof model and specify the material</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rayrender.net" class="external-link">rayrender</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rayvertex.com" class="external-link">rayvertex</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">roof_model</span> <span class="op">=</span> <span class="fu">generate_roof</span><span class="op">(</span><span class="va">skeleton</span>, material <span class="op">=</span> <span class="fu"><a href="https://www.rayvertex.com/reference/material_list.html" class="external-link">material_list</a></span><span class="op">(</span>diffuse<span class="op">=</span><span class="st">"purple"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">scene_base</span> <span class="op">=</span> <span class="fu"><a href="https://www.rayrender.net/reference/xz_rect.html" class="external-link">xz_rect</a></span><span class="op">(</span>xwidth<span class="op">=</span><span class="fl">100</span>,zwidth<span class="op">=</span><span class="fl">100</span>,</span></span>
<span class="r-in"><span>                       material<span class="op">=</span><span class="fu"><a href="https://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"grey20"</span>, checkercolor<span class="op">=</span><span class="st">"white"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="https://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>y<span class="op">=</span><span class="fl">8</span>,z<span class="op">=</span><span class="fl">10</span>,x<span class="op">=</span><span class="op">-</span><span class="fl">3</span>,material<span class="op">=</span><span class="fu"><a href="https://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>intensity<span class="op">=</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="https://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>y<span class="op">=</span><span class="fl">800</span>,z<span class="op">=</span><span class="fl">10</span>,x<span class="op">=</span><span class="op">-</span><span class="fl">3</span>,radius<span class="op">=</span><span class="fl">100</span>,material<span class="op">=</span><span class="fu"><a href="https://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>intensity<span class="op">=</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_model</span>, override_material <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="va">scene_base</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">30</span>,<span class="fl">20</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>,</span></span>
<span class="r-in"><span>                 width<span class="op">=</span><span class="fl">800</span>,height<span class="op">=</span><span class="fl">800</span>,fov<span class="op">=</span><span class="fl">0</span>,ortho_dimensions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="generate_roof-2.png" alt="" width="800" height="800"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change the maximum height of the roof</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">roof_model</span> <span class="op">=</span> <span class="fu">generate_roof</span><span class="op">(</span><span class="va">skeleton</span>, max_height<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_model</span>, material <span class="op">=</span> <span class="fu"><a href="https://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="va">scene_base</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">30</span>,<span class="fl">20</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>,</span></span>
<span class="r-in"><span>                 width<span class="op">=</span><span class="fl">800</span>,height<span class="op">=</span><span class="fl">800</span>,fov<span class="op">=</span><span class="fl">0</span>,ortho_dimensions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="generate_roof-3.png" alt="" width="800" height="800"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Add a vertical_offset to the roof, without a base</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">roof_model</span> <span class="op">=</span> <span class="fu">generate_roof</span><span class="op">(</span><span class="va">skeleton</span>, vertical_offset <span class="op">=</span> <span class="fl">2</span>, base <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_model</span>, material <span class="op">=</span> <span class="fu"><a href="https://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="va">scene_base</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span>, lookat<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span>,<span class="fl">0</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>,</span></span>
<span class="r-in"><span>                 width<span class="op">=</span><span class="fl">800</span>,height<span class="op">=</span><span class="fl">800</span>,fov<span class="op">=</span><span class="fl">0</span>,ortho_dimensions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="generate_roof-4.png" alt="" width="800" height="800"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add a base</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">roof_model</span> <span class="op">=</span> <span class="fu">generate_roof</span><span class="op">(</span><span class="va">skeleton</span>, vertical_offset <span class="op">=</span> <span class="fl">2</span>, base <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_model</span>, material <span class="op">=</span> <span class="fu"><a href="https://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="va">scene_base</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span>, lookat<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span>,<span class="fl">0</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>,</span></span>
<span class="r-in"><span>                 width<span class="op">=</span><span class="fl">800</span>,height<span class="op">=</span><span class="fl">800</span>,fov<span class="op">=</span><span class="fl">0</span>,ortho_dimensions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="generate_roof-5.png" alt="" width="800" height="800"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change the base height (note that the vertical_offset is measured from the base, not from zero)</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">roof_model</span> <span class="op">=</span> <span class="fu">generate_roof</span><span class="op">(</span><span class="va">skeleton</span>, vertical_offset <span class="op">=</span> <span class="fl">2</span>, base <span class="op">=</span> <span class="cn">TRUE</span>, base_height<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_model</span>, material <span class="op">=</span> <span class="fu"><a href="https://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="va">scene_base</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span>, lookat<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span>,<span class="fl">0</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>,</span></span>
<span class="r-in"><span>                 width<span class="op">=</span><span class="fl">800</span>,height<span class="op">=</span><span class="fl">800</span>,fov<span class="op">=</span><span class="fl">0</span>,ortho_dimensions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="generate_roof-6.png" alt="" width="800" height="800"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Skeletonize and turn an {sf} object into a roof</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">us_states</span> <span class="op">=</span> <span class="fu">spData</span><span class="fu">::</span><span class="va"><a href="https://jakubnowosad.com/spData/reference/us_states.html" class="external-link">us_states</a></span></span></span>
<span class="r-in"><span>  <span class="va">cali</span> <span class="op">=</span> <span class="va">us_states</span><span class="op">[</span><span class="va">us_states</span><span class="op">$</span><span class="va">NAME</span> <span class="op">==</span> <span class="st">"California"</span>,<span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="va">cali_skeleton</span> <span class="op">=</span> <span class="fu"><a href="skeletonize.html">skeletonize</a></span><span class="op">(</span><span class="va">cali</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="plot_skeleton.html">plot_skeleton</a></span><span class="op">(</span><span class="va">cali_skeleton</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">roof_model_cali</span> <span class="op">=</span> <span class="fu">generate_roof</span><span class="op">(</span><span class="va">cali_skeleton</span>, max_height <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayvertex.com/reference/center_mesh.html" class="external-link">center_mesh</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayvertex.com/reference/translate_mesh.html" class="external-link">translate_mesh</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://www.rayrender.net/reference/raymesh_model.html" class="external-link">raymesh_model</a></span><span class="op">(</span><span class="va">roof_model_cali</span>, material <span class="op">=</span> <span class="fu"><a href="https://www.rayrender.net/reference/diffuse.html" class="external-link">diffuse</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="va">scene_base</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="https://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>x<span class="op">=</span><span class="op">-</span><span class="fl">10</span>,z<span class="op">=</span><span class="op">-</span><span class="fl">10</span>,y<span class="op">=</span><span class="fl">4</span>,material<span class="op">=</span><span class="fu"><a href="https://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"red"</span>, intensity<span class="op">=</span><span class="fl">40</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/add_object.html" class="external-link">add_object</a></span><span class="op">(</span><span class="fu"><a href="https://www.rayrender.net/reference/sphere.html" class="external-link">sphere</a></span><span class="op">(</span>x<span class="op">=</span><span class="fl">10</span>,z<span class="op">=</span><span class="op">-</span><span class="fl">10</span>,y<span class="op">=</span><span class="fl">4</span>,material<span class="op">=</span><span class="fu"><a href="https://www.rayrender.net/reference/light.html" class="external-link">light</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"orange"</span>, intensity<span class="op">=</span><span class="fl">40</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://www.rayrender.net/reference/render_scene.html" class="external-link">render_scene</a></span><span class="op">(</span>lookfrom<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span>, sample_method <span class="op">=</span> <span class="st">"sobol_blue"</span>,</span></span>
<span class="r-in"><span>                 width<span class="op">=</span><span class="fl">800</span>,height<span class="op">=</span><span class="fl">800</span>,fov<span class="op">=</span><span class="fl">0</span>, ortho_dimensions<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>,<span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="generate_roof-7.png" alt="" width="800" height="800"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.tylermw.com" class="external-link">Tyler Morgan-Wall</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

